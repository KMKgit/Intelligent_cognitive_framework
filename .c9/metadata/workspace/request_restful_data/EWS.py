{"changed":true,"filter":false,"title":"EWS.py","tooltip":"/request_restful_data/EWS.py","value":"import json\nimport time\nimport urllib2\nimport random\nimport sys\nimport json\n\nfrom os import getcwd\nfrom termcolor import colored\n\n\n#lines = sys.stdin.readlines()[1::]\n#print lines\n\nwhile True:\n  try:\n    PATH = getcwd()\n    apiKey = 'GzZpPSWzWXvPPfFj'\n    method = 'Energy_Watt_Service'\n    model = 'train_201701_31_14_46'\n    inp = {'watt':93}\n    queryData = json.dumps({\n      'apiKey': apiKey,\n      'method': method,\n      'model' : model,\n      'inp': inp\n    })\n    print queryData\n    print\n    urlf = open(PATH + '/request_restful_data/url', 'r')\n    t = json.load(urlf)\n    url = t['url'] + ':8080/run'\n    clen = len(queryData)\n    urlf.close()\n    \n    req = urllib2.Request(url, queryData, {'Content-Type': 'application/json', 'Content-Length': clen})\n    f = urllib2.urlopen(req)\n    response = f.read()\n    f.close()\n\n    obj = json.loads(response)\n\n    print colored(type(obj), 'green')\n    print colored(obj, 'green')\n    time.sleep(5)\n  except:\n    print 'Error'\n    time.sleep(5)\n","undoManager":{"mark":0,"position":-1,"stack":[[{"start":{"row":28,"column":9},"end":{"row":29,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":29,"column":0},"end":{"row":29,"column":4},"action":"insert","lines":["    "]}]]},"ace":{"folds":[],"scrolltop":300,"scrollleft":0,"selection":{"start":{"row":28,"column":9},"end":{"row":28,"column":9},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":14,"state":"start","mode":"ace/mode/python"}},"timestamp":1495850446996}